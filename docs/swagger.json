{"swagger":"2.0","info":{"description":"Example API with JWT, Casbin, PostgreSQL, WebSocket","title":"Echo Casbin DDD App","termsOfService":"http://swagger.io/terms/","contact":{"name":"Martinus Dawan","email":"martinus@example.com"},"license":{"name":"MIT"},"version":"1.0"},"basePath":"/api/v1","paths":{"/":{"get":{"description":"Get a paginated list of users","consumes":["application/json"],"produces":["application/json"],"tags":["users"],"summary":"List users","parameters":[{"type":"integer","description":"Page number (default: 1)","name":"page","in":"query"},{"type":"integer","description":"Items per page (default: 10)","name":"limit","in":"query"}],"responses":{"200":{"description":"List of users","schema":{"$ref":"#/definitions/handler.ListUsersResponse"}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"post":{"description":"Create a new API client with the provided details","consumes":["application/json"],"produces":["application/json"],"tags":["api-clients"],"summary":"Create a new API client","parameters":[{"description":"API Client creation request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handler.CreateAPIClientRequest"}}],"responses":{"201":{"description":"Created API client","schema":{"$ref":"#/definitions/handler.APIClientResponse"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"/login":{"post":{"description":"Authenticate a user and return a token","consumes":["application/json"],"produces":["application/json"],"tags":["users"],"summary":"User login","parameters":[{"description":"User login request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handler.LoginRequest"}}],"responses":{"200":{"description":"Logged in user with token","schema":{"$ref":"#/definitions/handler.LoginResponse"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"401":{"description":"Unauthorized","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"/register":{"post":{"description":"Register a new user with the provided details","consumes":["application/json"],"produces":["application/json"],"tags":["users"],"summary":"Register a new user","parameters":[{"description":"User registration request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handler.RegisterRequest"}}],"responses":{"201":{"description":"Registered user with token","schema":{"$ref":"#/definitions/handler.RegisterResponse"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"/users":{"get":{"description":"Establish a WebSocket connection for real-time user updates","consumes":["application/json"],"produces":["application/json"],"tags":["websocket"],"summary":"Connect to user WebSocket","responses":{"101":{"description":"Switching Protocols to WebSocket","schema":{"type":"string"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"/{id}":{"get":{"description":"Retrieve a user by their ID","consumes":["application/json"],"produces":["application/json"],"tags":["users"],"summary":"Get a user by ID","parameters":[{"type":"integer","description":"User ID","name":"id","in":"path","required":true}],"responses":{"200":{"description":"User details","schema":{"$ref":"#/definitions/handler.UserResponse"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"404":{"description":"User not found","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"put":{"description":"Update an existing user with the provided details","consumes":["application/json"],"produces":["application/json"],"tags":["users"],"summary":"Update a user","parameters":[{"type":"integer","description":"User ID","name":"id","in":"path","required":true},{"description":"User update request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handler.UpdateUserRequest"}}],"responses":{"200":{"description":"Updated user","schema":{"$ref":"#/definitions/handler.UserResponse"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"delete":{"description":"Delete an existing API client","consumes":["application/json"],"produces":["application/json"],"tags":["api-clients"],"summary":"Delete an API client","parameters":[{"type":"integer","description":"API Client ID","name":"id","in":"path","required":true}],"responses":{"200":{"description":"Success message","schema":{"type":"object","additionalProperties":{"type":"string"}}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"/{id}/change-password":{"post":{"description":"Change the password of an existing user","consumes":["application/json"],"produces":["application/json"],"tags":["users"],"summary":"Change user password","parameters":[{"type":"integer","description":"User ID","name":"id","in":"path","required":true},{"description":"Change password request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handler.ChangePasswordRequest"}}],"responses":{"200":{"description":"Success message","schema":{"type":"object","additionalProperties":{"type":"string"}}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"/{id}/regenerate-key":{"post":{"description":"Regenerate the API key for an existing API client","consumes":["application/json"],"produces":["application/json"],"tags":["api-clients"],"summary":"Regenerate API key","parameters":[{"type":"integer","description":"API Client ID","name":"id","in":"path","required":true}],"responses":{"200":{"description":"API client with new API key","schema":{"$ref":"#/definitions/handler.APIClientResponse"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"/{id}/set-active":{"post":{"description":"Set the active status of an existing API client","consumes":["application/json"],"produces":["application/json"],"tags":["api-clients"],"summary":"Set API client active status","parameters":[{"type":"integer","description":"API Client ID","name":"id","in":"path","required":true},{"description":"Set active status request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handler.SetAPIClientActiveRequest"}}],"responses":{"200":{"description":"Updated API client","schema":{"$ref":"#/definitions/handler.APIClientResponse"}},"400":{"description":"Bad request","schema":{"type":"object","additionalProperties":{"type":"string"}}},"500":{"description":"Internal server error","schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}},"definitions":{"handler.APIClientResponse":{"type":"object","properties":{"active":{"type":"boolean"},"api_key":{"type":"string"},"created_at":{"type":"string"},"description":{"type":"string"},"id":{"type":"integer"},"name":{"type":"string"},"updated_at":{"type":"string"}}},"handler.ChangePasswordRequest":{"type":"object","required":["new_password","old_password"],"properties":{"new_password":{"type":"string","minLength":6},"old_password":{"type":"string"}}},"handler.CreateAPIClientRequest":{"type":"object","required":["name"],"properties":{"description":{"type":"string"},"name":{"type":"string"}}},"handler.ListAPIClientsResponse":{"type":"object","properties":{"api_clients":{"type":"array","items":{"$ref":"#/definitions/handler.APIClientResponse"}},"total_count":{"type":"integer"}}},"handler.ListUsersResponse":{"type":"object","properties":{"total_count":{"type":"integer"},"users":{"type":"array","items":{"$ref":"#/definitions/handler.UserResponse"}}}},"handler.LoginRequest":{"type":"object","required":["password","username"],"properties":{"password":{"type":"string"},"username":{"type":"string"}}},"handler.LoginResponse":{"type":"object","properties":{"token":{"type":"string"},"user":{"$ref":"#/definitions/handler.UserResponse"}}},"handler.RegisterRequest":{"type":"object","required":["email","password","role","username"],"properties":{"email":{"type":"string"},"password":{"type":"string","minLength":6},"role":{"type":"string"},"username":{"type":"string"}}},"handler.RegisterResponse":{"type":"object","properties":{"token":{"type":"string"},"user":{"$ref":"#/definitions/handler.UserResponse"}}},"handler.SetAPIClientActiveRequest":{"type":"object","properties":{"active":{"type":"boolean"}}},"handler.UpdateAPIClientRequest":{"type":"object","required":["name"],"properties":{"description":{"type":"string"},"name":{"type":"string"}}},"handler.UpdateUserRequest":{"type":"object","required":["email","username"],"properties":{"email":{"type":"string"},"username":{"type":"string"}}},"handler.UserResponse":{"type":"object","properties":{"active":{"type":"boolean"},"created_at":{"type":"string"},"email":{"type":"string"},"id":{"type":"integer"},"role":{"type":"string"},"updated_at":{"type":"string"},"username":{"type":"string"}}}}}